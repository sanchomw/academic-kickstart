---
title: 'Comparing the Amount of Water Needed to Produce Different Foods '
author: 'Sancho '
date: '2020-03-01'
slug: water-needed-to-produce-food
categories: []
tags:
  - Food
  - Environmental
subtitle: ''
summary: ''
authors: []
lastmod: '2020-03-01T19:49:32-05:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
output:
  blogdown::html_page:
    toc: yes
draft: true
---

```{r include=FALSE, eval=FALSE}
# render magic (copied from ellocke, not exactly sure what this does)
rmarkdown::render("index.Rmd")
```

```{r include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(warning=FALSE)
knitr::opts_chunk$set(message=FALSE)
```

```{r}
library(blogdown)
library(tidyverse)
library(maps)
library(sf)
library(rnaturalearth)
library(rnaturalearthdata)
library(rgeos)
library(ggspatial)
library(plotly)
library(widgetframe)
library(httr)
library(openxlsx)
library(scales)

```
#How 15,415 Got in my Head

This topic did not just come to me as a random shower thought, as fitting as that would be for this topic. I was doing what plenty of people do and I was wasting time on the internet. I came across one infographic that showed the water needed to produce 1kg (2.2lbs) of food. At the top, it showed that 1kg of tomatoes required 214 litres (56 gallons) with a tiny litte puddle next to a cartoon tomato. At the very bottom, there was this cow next to a huge pond that showed 1kg of beef required **15,415** litres (4,072 gallons) of water. This didn't sit well with me. 

It just didn't make sense to compare the same weight of tomatoes and beef. Reason one, 1kg of beefsteak tomatoes are less than 200 calories, while the same weight of ribeye is right around 2,900 calories. Its just not a fair comparison. I then wondered what the source of that number was. It was probably done unscientifically or it was fully funded by someone with an agenda. So I decided to look into it deeper. I eventually did find the source, but while doing my research I learned a lot more about the idea of water scarcity. 

#Why should we care about water?

##Cape Town Water Crisis

I remember my first reaction to hearing about water scarcity was doubting it was a real issue. Then I learned, in January of 2018 it was announced that Cape Town, South Africa was less than 90 days away from running out of water, which they called "Day Zero" [(Time, 2018)](https://time.com/5103259/cape-town-water-crisis/). See the map below for the location of Cape Town. At that point they would have to shut off water and people would have to go to one of 200 water collections points in the city. They would then have wait in line to receive their daily allotment of 6.6 gallons. For reference, shower heads in the US are usually capped at 2.5 gallons a minute [(Portland Water Bureau)](https://www.portlandoregon.gov/water/article/305153). Using this 2.5 gallon/minute flow rate, the 6.6 gallons of water would allow you to have a 2 minute and 38 second shower. 

Fortunately, through several measures Capetonians were able to redirect water and reduce their use enough to push back Day Zero indefinitely. One measure taken was every person was capped at 23 gallons per day, which is about 9min and 12 seconds of shower time per person. Businesses also helped with the effort, restaurants put up "if its yellow let it mellow" signs, and offices had "dirty shirt" challenges to see who could wear the same shirt the longest without washing [(Alexander, 2019)](https://www.citylab.com/environment/2019/04/cape-town-water-conservation-south-africa-drought/587011/). However, one single change was able to reduce water usage by 15%. Farmers agreed to half the water they were using from 30% of all water down to 15% [(Mail and Guardian, 2018)](https://mg.co.za/article/2018-02-05-day-zero-pushed-back-to-may-11/). 

```{r}

#get the world map data
world <- ne_countries(scale = "medium", returnclass = "sf")

#plot africa with a cutout of the next map
plot1 <- ggplot(data = world) + 
  geom_sf() +
  coord_sf(xlim = c(-20,50), ylim = c(-40, 30), expand = FALSE)+
  geom_rect(xmin = 14, xmax = 22, ymin = -37, ymax = -29, fill = NA, color = "black", size = 1.5) +
  labs(x = "", y = "")+
  theme_bw()+
  theme(panel.background = element_rect(fill = "azure"),
        panel.border = element_rect(fill = NA))

#plot1 <- ggplotly(plot1)

#map with capetown circled
plot2 <- ggplot(data = world) +
  geom_sf() +
  annotation_scale(location = "bl", width_hint = 0.5, unit_category = "imperial") +
  annotation_north_arrow(location = "bl", which_north = "true", 
      pad_x = unit(0.1, "in"), pad_y = unit(0.5, "in"),
      style = north_arrow_fancy_orienteering) +
  coord_sf(xlim = c(14, 22), ylim = c(-37, -29), expand = FALSE)+
  geom_point(aes(x = 18.4241, y = -33.9249), shape = 21, color = "blue",size = 15, fill = NA)+
  labs(x = "", y = "")+
  theme_bw()+
  theme(panel.background = element_rect(fill = "azure"),
        panel.border = element_rect(fill = NA))

#plot2 <- ggplotly(plot2)

#geom_point(shape = 21, colour = "black", fill = "white", size = 5, stroke = 5)
#33.9249° S, 18.4241° E
```

```{r fig.width=3 , fig.height=3 , fig.show = "hold", out.width = "50%"}

plot1 #%>%
  #frameWidget(width = "100%", height = "100%")

plot2 #%>%
  #frameWidget(width = "100%", height = "100%")

```

This issue is not isolated either. In 2018, California imposed permanent water restrictions that go into effect statewide in 2022 [(LA Times, 2018)](https://www.latimes.com/socal/glendale-news-press/news/tn-gnp-me-water-efficiency-bill-20180601-story.html). They limit indoor water use to 55 gallons per person per day, which comes out to a 22 minute shower using our numbers from above.  

##Fresh vs Salt Water

The biggest irony about the Cape Town water crisis is that the city is surrounded by water. However, it is surrounded by salty, ocean water, which is totally unusable for most of our needs. If we were cats this would be much less of an issue, this is because cat's kidneys are efficient enough that they can drink salt water for short periods of time and hydrate from it [(Base Paws)](https://www.basepaws.com/blog/top-10-random-facts-about-cats/). 

According to the [USGS](https://www.usgs.gov/special-topic/water-science-school/science/where-earths-water?qt-science_center_objects=0#qt-science_center_objects), fresh water only accounts for 2.5% of all water on the earth. Of the fresh water we do have, about 68% is frozen in glaciers and ice caps, 30.1% is underground, and only 1.2% can be found on the earths surface. The easily usable water falls into the following categories:

* Lakes
* Soil moisture
* Swamps, marshes
* Rivers
* Atmosphere
* Living things (Humans included!)

```{r}

#get earth water
earth.water <- c("Fresh", rep("Salty", times =39))

#get surface water as part of fresh
fresh.water <- c(rep("Frozen", times = 57), rep("Underground", times = 25), "Surface")

labels = c("All Water","Salty", "Fresh", "Frozen", "Underground", "Surface")
parents = c("", "All Water","All Water", "Fresh", "Fresh", "Fresh")

plot3a <- plot_ly(labels = labels, 
        parents = parents, 
        values = c(100, 97.5, 2.5, 1.7, 0.75, .03),
        type = "sunburst", 
        branchvalues = "total")

plot3b <- plot_ly(labels = c("Fresh", "Frozen", "Underground", "Surface"),
                  parents = c("", "Fresh", "Fresh", "Fresh"),
                  values = c(100, 68, 30.1, 1.2),
                  type = "sunburst",
                  branchvalues = "total"
                  )
```

The graph below shows the breakdown of fresh and salty water, with the fresh water further broken down into frozen, underground, and surface (which you can't really see because it is too small).

```{r out.width = '100%'}

plot3a %>%
  frameWidget(width = "100%", height = "100%")

```

The following graph shows just the fresh water so that the surface water (lakes and rivers) is easier to see. The missing portion is the water in soil moisture, the atmosphere, and living things. 

```{r out.width = '100%'}

plot3b %>%
  frameWidget(width = "100%", height = "100%")

```
We get most of our fresh water from rivers and lakes, which only account for 22,339 cubic miles of the 332.5 million cubic miles of water on the planet (.006%). To put this into perspective, lets go back to the shower example. My friend Chris likes to take 45 minute showers, if all 7.7 billion people in the world took 45 minute showers everyday for a year we would use about 1.29% of all fresh water. The average person lives 72 years, so if we all showered like Chris during our collective life times we would use 92.7% of all the fresh water in our rivers and lakes. I don't want to be alarmist, so I do want to make clear that most of the water we use does get treated and is reintroduced into our rivers and lakes. 

##Water use in Agriculture

Therefore, we should all blame Chris for our water problems right? Well, not quite. Worldwide, only 12% of water is used for domestic/house hold purposes[(FAO)](http://www.fao.org/aquastat/en/overview/methodology/water-use). Industrial uses account for 19% of all water used, and agriculture uses the majority at 69% of all water used. Chris, sorry for the accusations you are off the hook this time! 

```{r}

#set up data
Sector <- c("Domestic/Household", "Industrial", "Agriculture")
Percent <- c(12, 19, 69)
temp.df <- as.data.frame(cbind(Sector, Percent))

plot_ly(temp.df, labels = ~Sector, values = ~Percent, type = "pie") %>% 
  layout(title = "Worldwide Water Use by Sector")


```

Across the world, it was estimated by [FA0 (2016)](https://www.globalagriculture.org/fileadmin/files/weltagrarbericht/Weltagrarbericht/13Wasser/2016WorldData-Withdrawal_eng.pdf) that agriculture used about 664 cubic miles of water. By 2050, agriculture is expected to use 2,042 cubic miles of water a year due to the increase in population and changes in food habits [(UNESCO, 2012)](http://www.unesco.org/new/fileadmin/MULTIMEDIA/HQ/SC/pdf/WWDR4%20Volume%201-Managing%20Water%20under%20Uncertainty%20and%20Risk.pdf). That would account for 9.14% of all the fresh water in our rivers and lakes every year. 

Before I go much further, I just want to make it clear that I support agriculture and farmers, without them we would not have food and that is just as important as water. We could blame farmers, but they are just reacting to the demands of consumers. As long as people want to pay for certain foods, there will be someone willing to produce it for money. I am also not saying you as a consumer should never eat certain foods. This post is purely meant to be informative.  

#Water use for Different Foods

I need to give a huge thanks to M.M Mekonnen and A.Y. Hoekstra from the University of Twente in the Netherlands. All the water data for the next section comes directly from their research. They published two papers that are seminal to the field in the early 2010s ([Mekonnen & Hoekstra, 2011](https://waterfootprint.org/media/downloads/Mekonnen-Hoekstra-2011-WaterFootprintCrops.pdf); [Mekonnen & Hoekstra, 2012](https://waterfootprint.org/media/downloads/Mekonnen-Hoekstra-2012-WaterFootprintFarmAnimalProducts.pdf)). The papers have been cited by other researchers 1,391 and 799 times. The 2011 paper focuses on the "water footprint" of farmed crops and the 2012 paper focuses on the water footprint of farmed animals.

Mekonnen & Hoekstra (2011,2012) refer to this concept of water footprint as coming from 3 different sources: green, blue, and grey. Let me explain each briefly: 

* Green - water from rain 
* Blue - water from rivers, lakes, or groundwater 
* Grey - fresh water needed to dilute pollutants enough to meet good water quality standards

They calculated each of these separately and then added them together to get the water footprint. They did this for 106 animal products and 355 plant products, in every country. From this they calculated worldwide averages of the water needed to grow each of these products.

```{r}

#links
#https://waterfootprint.org/en/resources/waterstat/product-water-footprint-statistics/

options(scipen = 999)

#need to click on the data in github, right click "view raw", and then click "Copy link address" for this to work
plant.data <- read.xlsx("https://github.com/sanchomw/blog-data/blob/master/Water_Use_Crops.xlsx?raw=true")
animal.data <- read.xlsx("https://github.com/sanchomw/blog-data/blob/master/Water_Use_Animals.xlsx?raw=true")

#need to fill data down rows
animal.data <- animal.data %>%
  fill(`HS.(PC-TAS).code`:Weighted.average)
plant.data <- plant.data %>%
  fill(`Product.code.(FAOSTAT)`:Global.average) 

#long to wide, remove unecessary rows, get total water
animal.data <- animal.data %>%
  select(-c(Grazing:Industrial)) %>%
  spread(., Water.Food.Print, Weighted.average)%>%
  mutate(`Total Water` = Blue+Green+Grey) %>%
  select(`Description (short)` = `Product.description.(SITC)`, `Description (long)` = `Product.discription.(HS)`, Blue, Green, Grey, `Total Water`)
plant.data <- plant.data %>%
  spread(. ,Water.Footprint, Global.average) %>%
  mutate(`Total Water` = Blue+Green+Grey)  %>%
  select(`Description (short)` = `Product.description.(FAOSTAT)`, `Description (long)` = `Product.description.(HS)`, Blue, Green, Grey, `Total Water`)

```

##Revisiting 15,415

I came across these researchers in my hunt for 15,415. If you want to take a second to google "15,415 liters" and you will get 10s of thousands of results and all of them will eventually point back to the Mekonnen & Hoekstra paper. If you google "Water needed to produce beef" the majority will also point back to this article and give the 15,415 number. I went ahead and read the article and pretty quickly found out they do include food comparisons by nuritional content. 

The graphs below show the difference calories add. The graph on the to left is the liters needed to produce beef and vegetables (on average), which shows that beef uses 47.8x more water. The graph on the top right shows the liters per calorie, and this shows beef using 7.6x more water. This shows that while beef does use more water, anyone that cites "15,415 liters" is exaggerating the issue quite a bit. The bottom two charts break it down further by calories of protein and fat. Interestingly, when it comes to calories of fat, beef actually needs 1 liter less water than vegetables.    

```{r}
#get veg data
veg <- c("Vegetables", 322, 1.34, 26, 154)

#get beef data 
beef <- c("Beef", 15415, 10.19, 112, 153)

#combine
temp.df <- as.data.frame(rbind(veg, beef))

#name columns
colnames(temp.df) <- c("Product", "Total Water Footprint", "Calorie (liter/kcal)",
                       "Protein (liter/g protein)", "Fat (liter/g fat)")

#make the numeric columns numeric
temp.df[,2:5] <- apply(temp.df[,2:5], 2, function(x) as.character(x))
temp.df[,2:5] <- apply(temp.df[,2:5], 2, function(x) as.numeric(x))



#plot 1 - no Cal
plot4a <- plot_ly(temp.df, x = ~Product, y = ~`Total Water Footprint`, type = "bar", name = "No Calories")

#plot 2 - with calories
plot4b <- plot_ly(temp.df, x = ~Product, y = ~`Calorie (liter/kcal)`, type = "bar", name = "With Calories") 

#plot 3 - Calories of Protein
plot4c <- plot_ly(temp.df, x = ~Product, y = ~`Protein (liter/g protein)`, type = "bar", name = "Calories of Protein") 

#plot 4 - Calories of Fat
plot4d <- plot_ly(temp.df, x = ~Product, y = ~`Fat (liter/g fat)`, type = "bar", name = "Calories of Fat") 




#combine
plot4 <- subplot(plot4a, plot4b, plot4c, plot4d, nrows = 2)

plot4


```

For the remained of these analyses, I will be using the raw water data as Mekonnen & Hoekstra did not provide calorie data for all the products (only a handful). However, please keep in mind that calories would change these numbers quite a bit. In the future, I hope to do a follow up post that takes the calorie data into account. 

##Water use for Plants

First, lets take a look at the plant products that use the least amount of water. A quick note, if you click on the legend you can remove that data point (including the text total). If you double click on a data point in the legend you can isolate that single data point. That way you can see the grey, green, or blue water footprint for each product. As always hovering will give you the specific numbers underlying that data point.

```{r}

#pull out bottom 5, get label for plotting
temp.df <- plant.data %>%
  arrange(`Total Water`) %>%
  filter(`Total Water` < 215) %>%
  mutate(Label = comma(`Total Water`, accuracy = 1))

#factor to save order when plotting 
temp.df$`Description (long)` <- factor(temp.df$`Description (long)`, level = c(as.character(temp.df$`Description (long)`)))

plot_ly(temp.df, x = ~`Description (long)`, y =~Blue, type = "bar", name = "Blue", marker = list(color = "blue")) %>%
  add_trace(y = ~Green, name = "Green", marker = list(color = "green")) %>%
  add_trace(y = ~Grey, name = "Grey", marker = list(color = "grey")) %>%
  add_text(y = ~`Total Water`, text = ~`Label`, hoverinfo = "none", textposition = "top center", name = "Total Water Footprint", marker = NULL) %>%
  layout(barmode = "stack",
         yaxis = list(title = "Water (Liters)"),
         xaxis = list(title = "Product"))

```

As you can see, sugar beets require the least amount of water out of any plant product (or animal product of that matter). I think we should take this to mean that Dwight Schrute was actually a secret environmentalist. 

On the other side of the spectrum here are the plant products that required the most water. This is one graph where being able to isolate a data point (grey water in this case) by double clicking the legend is extremely useful. 

```{r}

#pull out bottom 5, get label for plotting
temp.df <- plant.data %>%
  arrange(`Total Water`) %>%
  filter(`Total Water` > 24300) %>%
  mutate(Label = comma(`Total Water`, accuracy = 1))

#factor to save order when plotting 
temp.df$`Description (long)` <- factor(temp.df$`Description (long)`, level = c(as.character(temp.df$`Description (long)`)))

plot_ly(temp.df, x = ~`Description (long)`, y =~Blue, type = "bar", name = "Blue", marker = list(color = "blue")) %>%
  add_trace(y = ~Green, name = "Green", marker = list(color = "green")) %>%
  add_trace(y = ~Grey, name = "Grey", marker = list(color = "grey")) %>%
  add_text(y = ~`Total Water`, text = ~`Label`, hoverinfo = "none", textposition = "top center", name = "Total Water Footprint", marker = NULL) %>%
  layout(barmode = "stack",
         yaxis = list(title = "Water (Liters)"),
         xaxis = list(title = "Product"))

```

Vanilla beans required the most water of any plant, this is likely due to their light weight and their extremely long grow time (multiple years). The other water intensive plants were either spices or fats. 

The next few categories I am going to visualize are: Fruits, Veggies, Drinks, and Carbs. For each category I am going to pick out the most popular products from each category. If you want to see a break down for every product in the database skip down to the last section. There are 355 products in the plant data, so I can't show everything in there. First, let me visualize some of the most popular fruits.

```{r}

#pull out bottom 5, get label for plotting
temp.df <- plant.data %>%
  filter(`Description (long)` %in% c("Bananas", "Apples, fresh", "Strawberries, fresh", "Grapes, fresh", "Oranges, fresh or dried")) %>%
  arrange(`Total Water`) %>%
  mutate(Label = comma(`Total Water`, accuracy = 1))

#factor to save order when plotting 
temp.df$`Description (long)` <- factor(temp.df$`Description (long)`, level = c(as.character(temp.df$`Description (long)`)))

plot_ly(temp.df, x = ~`Description (long)`, y =~Blue, type = "bar", name = "Blue", marker = list(color = "blue")) %>%
  add_trace(y = ~Green, name = "Green", marker = list(color = "green")) %>%
  add_trace(y = ~Grey, name = "Grey", marker = list(color = "grey")) %>%
  add_text(y = ~`Total Water`, text = ~`Label`, hoverinfo = "none", textposition = "top center", name = "Total Water Footprint", marker = NULL) %>%
  layout(barmode = "stack",
         yaxis = list(title = "Water (Liters)"),
         xaxis = list(title = "Product"))

```

I found it surprising that apple was the "worst" of this group, using the most total,  blue,  and grey water. I did like that all of these fruits get the majority of their water from green sources, which is the most sustainable source. Strawberries are my favorite, so this just gives me an excuse to eat more strawberries. Next, lets take a look at veggies. 

```{r}

#pull out bottom 5, get label for plotting
temp.df <- plant.data %>%
  filter(`Description (long)` %in% c("Potatoes, fresh or chilled nes","Tomatoes, fresh or chilled","Onions and shallots, fresh or chilled","Carrots and turnips, fresh or chilled","Cauliflowers and headed broccoli, fresh or chilled")) %>%
  arrange(`Total Water`) %>%
  mutate(Label = comma(`Total Water`, accuracy = 1))

#factor to save order when plotting 
temp.df$`Description (long)` <- factor(temp.df$`Description (long)`, level = c(as.character(temp.df$`Description (long)`)))

plot_ly(temp.df, x = ~`Description (long)`, y =~Blue, type = "bar", name = "Blue", marker = list(color = "blue")) %>%
  add_trace(y = ~Green, name = "Green", marker = list(color = "green")) %>%
  add_trace(y = ~Grey, name = "Grey", marker = list(color = "grey")) %>%
  add_text(y = ~`Total Water`, text = ~`Label`, hoverinfo = "none", textposition = "top center", name = "Total Water Footprint", marker = NULL) %>%
  layout(barmode = "stack",
         yaxis = list(title = "Water (Liters)"),
         xaxis = list(title = "Product"))

```

All the vegetables in this group used less water than the fruit group, overall this trend holds with veggies using less water than fruit. However, both groups do get a majority of their water from green sources. Looking at the other water sources, tomatoes actually used the most blue water, while cauliflower used the most grey water. If you have read this far thank you, and feel free to grab a drink for this next section. 

```{r}

#pull out bottom 5, get label for plotting
temp.df <- plant.data %>%
  filter(`Description (long)` %in% c("Beer made from malt","Grape wines nes,incl fort&grape must,unfermntd by add alc,in ctnr > 2l","Coffee, roasted, not decaffeinated","Tea")) %>%
  arrange(`Total Water`) %>%
  mutate(Label = comma(`Total Water`, accuracy = 1))

#shorten label
temp.df[2,2] <- "Grape Wines"

#factor to save order when plotting 
temp.df$`Description (long)` <- factor(temp.df$`Description (long)`, level = c(as.character(temp.df$`Description (long)`)))

plot_ly(temp.df, x = ~`Description (long)`, y =~Blue, type = "bar", name = "Blue", marker = list(color = "blue")) %>%
  add_trace(y = ~Green, name = "Green", marker = list(color = "green")) %>%
  add_trace(y = ~Grey, name = "Grey", marker = list(color = "grey")) %>%
  add_text(y = ~`Total Water`, text = ~`Label`, hoverinfo = "none", textposition = "top center", name = "Total Water Footprint", marker = NULL) %>%
  layout(barmode = "stack",
         yaxis = list(title = "Water (Liters)"),
         xaxis = list(title = "Product"))

```

If you grabbed alcohol then you made an enviormentally friendly decision. However, this isn't quite a fair comparison as 1kg of coffee beans/ tea leaves makes far more
than 1kg of coffee and tea. For reference, 1kg of beer is 33oz which is slighly less than 3 cans, or is about 1.3 bottles of wine. It is still surprising that tea and coffee require so much water to produce. For this graph, I recommending hovering over the graph and clicking the option that says "compare data on hover" (2nd from the right). That way you can see the beer/wine breakdown with having to zoom in. A quick note, I have kept the original names from the dataset the same on my graphs, but I did shorten the graph wine label from "Grape wines nes,incl fort&grape must,unfermntd by add alc,in ctnr > 2l". The final plant category I am going to look at is carb or grains. 

```{r}

#pull out bottom 5, get label for plotting
temp.df <- plant.data %>%
  filter(`Description (long)` %in% c("Maize (corn)","Rice, husked (brown)","Wheat (Durum wheat, Wheat nes and meslin)","Germ of cereals, whole, rolled, flaked or ground")) %>%
  arrange(`Total Water`) %>%
  mutate(Label = comma(`Total Water`, accuracy = 1))

#factor to save order when plotting 
temp.df$`Description (long)` <- factor(temp.df$`Description (long)`, level = c(as.character(temp.df$`Description (long)`)))

plot_ly(temp.df, x = ~`Description (long)`, y =~Blue, type = "bar", name = "Blue", marker = list(color = "blue")) %>%
  add_trace(y = ~Green, name = "Green", marker = list(color = "green")) %>%
  add_trace(y = ~Grey, name = "Grey", marker = list(color = "grey")) %>%
  add_text(y = ~`Total Water`, text = ~`Label`, hoverinfo = "none", textposition = "top center", name = "Total Water Footprint", marker = NULL) %>%
  layout(barmode = "stack",
         yaxis = list(title = "Water (Liters)"),
         xaxis = list(title = "Product"))

```

Carbs are really light in weight so it is not surprising that they require quite a bit of water to produce 1kg, but I was surprised that there were such large differences within this group. What is interesting to note is although cereals require the most total water, they actually use the least water if you remove green water so they are arguably the most sustainable. The difference is not small either, they use around 100liters, which the rest use between 250 and 700 liters of grey and blue water. 

##Water use for Animals

A quick note, I am using the product names as they appear in the dataset, but will point out if I shorten anything. I am doing this so its easily searchable in the bottom section, and so that I can stay true to the source data. Here are some words they use that are not as common: 

* Bovine = Cow
* Swine = Pig
* Offal = Internal organs (don't look it up, its a catch all category)

I am going to start the animals the same way as the vegetables, with the 5 products in the data that use the least amount of water first.

```{r}

#pull out bottom 5, get label for plotting
temp.df <- animal.data %>%
  arrange(`Total Water`) %>%
  filter(`Total Water` < 1160) %>%
  mutate(#`Description (long)` = gsub('(?s)(?=(?:.{25})+$)', "<br>", `Description (long)`, perl = TRUE),
    `Description (long)` = gsub('(.{1,30})(\\s|$)', "\\1<br>", `Description (long)`),
    Label = comma(`Total Water`, accuracy = 1))

#factor to save order when plotting 
temp.df$`Description (long)` <- factor(temp.df$`Description (long)`, level = c(as.character(temp.df$`Description (long)`)))

plot_ly(temp.df, x = ~`Description (long)`, y =~Blue, type = "bar", name = "Blue", marker = list(color = "blue")) %>%
  add_trace(y = ~Green, name = "Green", marker = list(color = "green")) %>%
  add_trace(y = ~Grey, name = "Grey", marker = list(color = "grey")) %>%
  add_text(y = ~`Total Water`, text = ~`Label`, hoverinfo = "none", textposition = "top center", name = "Total Water Footprint", marker = NULL) %>%
  layout(barmode = "stack",
         yaxis = list(title = "Water (Liters)"),
         xaxis = list(title = "Product"))

```



#All Numbers




